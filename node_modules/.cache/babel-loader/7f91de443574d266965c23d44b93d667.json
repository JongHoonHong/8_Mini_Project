{"ast":null,"code":"import axios from \"axios\";\nconst initialState = {\n  list: []\n};\nconst LOAD = \"post/LOAD\";\nconst ADD = \"post/ADD\";\nconst UPDATE = \"post/UPDATE\";\nconst DELETE = \"post/DELETE\";\nexport function loadPost(post_list) {\n  return {\n    type: LOAD,\n    post_list\n  };\n}\nexport function addPost(post) {\n  return {\n    type: ADD,\n    post\n  };\n}\nexport function updatePost(post_index) {\n  return {\n    type: UPDATE,\n    post_index\n  };\n}\nexport function deletePost(post_index) {\n  return {\n    type: DELETE,\n    post_index\n  };\n}\nexport const loadPostDB = () => {\n  return function (dispatch) {\n    axios({\n      method: \"get\",\n      url: \"http://localhost:5001/post_data\"\n    }).then(response => {\n      console.log(response);\n      dispatch(loadPost(response.data));\n    });\n  };\n};\nexport const addPostDB = post => {\n  console.log(post.title);\n  return function (dispatch) {\n    axios.post(\"http://localhost:5001/post_data\", post).then(response => {\n      console.log(post);\n      dispatch(addPost(post));\n    });\n  };\n}; // export const updatePostFB = (post_id) => {\n//   return async function (dispatch, getState) {\n//     dispatch(updatePost(post_index));\n//   };\n// };\n\nexport const deletePostDB = post_id => {\n  return function (dispatch) {\n    axios.delete(\"http://localhost:5001/post_data/${post_id}\");\n    dispatch(deletePost(post_id));\n  };\n};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    case \"post/LOAD\":\n      {\n        return {\n          list: action.post_list\n        };\n      }\n\n    case \"post/ADD\":\n      {\n        const new_post_list = [...state.list, action.post];\n        return {\n          list: new_post_list\n        };\n      }\n\n    case \"post/UPDATE\":\n      {}\n\n    case \"post/DELETE\":\n      {\n        const new_post_list = state.list.filter((l, idx) => {\n          return parseInt(action.post_index) !== idx;\n        });\n        return {\n          list: new_post_list\n        };\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["axios","initialState","list","LOAD","ADD","UPDATE","DELETE","loadPost","post_list","type","addPost","post","updatePost","post_index","deletePost","loadPostDB","dispatch","method","url","then","response","console","log","data","addPostDB","title","deletePostDB","post_id","delete","reducer","state","action","new_post_list","filter","l","idx","parseInt"],"sources":["/Users/jh/Desktop/Mini_Project/eco/src/redux/modules/post.js"],"sourcesContent":["import axios from \"axios\";\n\nconst initialState = {\n  list: [],\n};\n\nconst LOAD = \"post/LOAD\";\nconst ADD = \"post/ADD\";\nconst UPDATE = \"post/UPDATE\";\nconst DELETE = \"post/DELETE\";\n\nexport function loadPost(post_list) {\n  return { type: LOAD, post_list };\n}\n\nexport function addPost(post) {\n  return { type: ADD, post };\n}\n\nexport function updatePost(post_index) {\n  return { type: UPDATE, post_index };\n}\n\nexport function deletePost(post_index) {\n  return { type: DELETE, post_index };\n}\n\nexport const loadPostDB = () => {\n  return function (dispatch) {\n    axios({\n      method: \"get\",\n      url: \"http://localhost:5001/post_data\",\n    }).then((response) => {\n      console.log(response);\n      dispatch(loadPost(response.data));\n    });\n  };\n};\n\nexport const addPostDB = (post) => {\n  console.log(post.title);\n  return function (dispatch) {\n    axios.post(\"http://localhost:5001/post_data\", post).then((response) => {\n      console.log(post);\n      dispatch(addPost(post));\n    });\n  };\n};\n\n// export const updatePostFB = (post_id) => {\n//   return async function (dispatch, getState) {\n//     dispatch(updatePost(post_index));\n//   };\n// };\n\nexport const deletePostDB = (post_id) => {\n  return function (dispatch) {\n    axios.delete(\"http://localhost:5001/post_data/${post_id}\");\n    dispatch(deletePost(post_id));\n  };\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case \"post/LOAD\": {\n      return { list: action.post_list };\n    }\n    case \"post/ADD\": {\n      const new_post_list = [...state.list, action.post];\n      return { list: new_post_list };\n    }\n    case \"post/UPDATE\": {\n    }\n    case \"post/DELETE\": {\n      const new_post_list = state.list.filter((l, idx) => {\n        return parseInt(action.post_index) !== idx;\n      });\n      return { list: new_post_list };\n    }\n    default:\n      return state;\n  }\n}\n"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE;AADa,CAArB;AAIA,MAAMC,IAAI,GAAG,WAAb;AACA,MAAMC,GAAG,GAAG,UAAZ;AACA,MAAMC,MAAM,GAAG,aAAf;AACA,MAAMC,MAAM,GAAG,aAAf;AAEA,OAAO,SAASC,QAAT,CAAkBC,SAAlB,EAA6B;EAClC,OAAO;IAAEC,IAAI,EAAEN,IAAR;IAAcK;EAAd,CAAP;AACD;AAED,OAAO,SAASE,OAAT,CAAiBC,IAAjB,EAAuB;EAC5B,OAAO;IAAEF,IAAI,EAAEL,GAAR;IAAaO;EAAb,CAAP;AACD;AAED,OAAO,SAASC,UAAT,CAAoBC,UAApB,EAAgC;EACrC,OAAO;IAAEJ,IAAI,EAAEJ,MAAR;IAAgBQ;EAAhB,CAAP;AACD;AAED,OAAO,SAASC,UAAT,CAAoBD,UAApB,EAAgC;EACrC,OAAO;IAAEJ,IAAI,EAAEH,MAAR;IAAgBO;EAAhB,CAAP;AACD;AAED,OAAO,MAAME,UAAU,GAAG,MAAM;EAC9B,OAAO,UAAUC,QAAV,EAAoB;IACzBhB,KAAK,CAAC;MACJiB,MAAM,EAAE,KADJ;MAEJC,GAAG,EAAE;IAFD,CAAD,CAAL,CAGGC,IAHH,CAGSC,QAAD,IAAc;MACpBC,OAAO,CAACC,GAAR,CAAYF,QAAZ;MACAJ,QAAQ,CAACT,QAAQ,CAACa,QAAQ,CAACG,IAAV,CAAT,CAAR;IACD,CAND;EAOD,CARD;AASD,CAVM;AAYP,OAAO,MAAMC,SAAS,GAAIb,IAAD,IAAU;EACjCU,OAAO,CAACC,GAAR,CAAYX,IAAI,CAACc,KAAjB;EACA,OAAO,UAAUT,QAAV,EAAoB;IACzBhB,KAAK,CAACW,IAAN,CAAW,iCAAX,EAA8CA,IAA9C,EAAoDQ,IAApD,CAA0DC,QAAD,IAAc;MACrEC,OAAO,CAACC,GAAR,CAAYX,IAAZ;MACAK,QAAQ,CAACN,OAAO,CAACC,IAAD,CAAR,CAAR;IACD,CAHD;EAID,CALD;AAMD,CARM,C,CAUP;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMe,YAAY,GAAIC,OAAD,IAAa;EACvC,OAAO,UAAUX,QAAV,EAAoB;IACzBhB,KAAK,CAAC4B,MAAN,CAAa,4CAAb;IACAZ,QAAQ,CAACF,UAAU,CAACa,OAAD,CAAX,CAAR;EACD,CAHD;AAID,CALM;AAOP,eAAe,SAASE,OAAT,GAAoD;EAAA,IAAnCC,KAAmC,uEAA3B7B,YAA2B;EAAA,IAAb8B,MAAa,uEAAJ,EAAI;;EACjE,QAAQA,MAAM,CAACtB,IAAf;IACE,KAAK,WAAL;MAAkB;QAChB,OAAO;UAAEP,IAAI,EAAE6B,MAAM,CAACvB;QAAf,CAAP;MACD;;IACD,KAAK,UAAL;MAAiB;QACf,MAAMwB,aAAa,GAAG,CAAC,GAAGF,KAAK,CAAC5B,IAAV,EAAgB6B,MAAM,CAACpB,IAAvB,CAAtB;QACA,OAAO;UAAET,IAAI,EAAE8B;QAAR,CAAP;MACD;;IACD,KAAK,aAAL;MAAoB,CACnB;;IACD,KAAK,aAAL;MAAoB;QAClB,MAAMA,aAAa,GAAGF,KAAK,CAAC5B,IAAN,CAAW+B,MAAX,CAAkB,CAACC,CAAD,EAAIC,GAAJ,KAAY;UAClD,OAAOC,QAAQ,CAACL,MAAM,CAAClB,UAAR,CAAR,KAAgCsB,GAAvC;QACD,CAFqB,CAAtB;QAGA,OAAO;UAAEjC,IAAI,EAAE8B;QAAR,CAAP;MACD;;IACD;MACE,OAAOF,KAAP;EAjBJ;AAmBD"},"metadata":{},"sourceType":"module"}